\chapter{Async Runtime Package\+: webcraft\+::async}
\hypertarget{md_include_2webcraft_2async_2README}{}\label{md_include_2webcraft_2async_2README}\index{Async Runtime Package: webcraft::async@{Async Runtime Package: webcraft::async}}
\label{md_include_2webcraft_2async_2README_autotoc_md41}%
\Hypertarget{md_include_2webcraft_2async_2README_autotoc_md41}%
 \hypertarget{md_include_2webcraft_2async_2README_autotoc_md42}{}\doxysection{\texorpdfstring{Awaitable Concepts}{Awaitable Concepts}}\label{md_include_2webcraft_2async_2README_autotoc_md42}
The \doxylink{namespacewebcraft_1_1async}{webcraft\+::async} namespace provides comprehensive concepts for working with awaitables\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{concept\ }is\_awaitable\_suspend\_type\ =\ std::same\_as<T,\ void>\ ||\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::convertible\_to<T,\ bool>\ ||\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::convertible\_to<T,\ std::coroutine\_handle<>>;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{concept\ }has\_member\_operator\_co\_await\_v\ =\ \textcolor{keyword}{requires}(T\ \&\&t)\ \{}
\DoxyCodeLine{\ \ \ \ \{\ t.operator\ \textcolor{keyword}{co\_await}()\ \};}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{concept\ }has\_non\_member\_operator\_co\_await\_v\ =\ \textcolor{keyword}{requires}(T\ \&\&t)\ \{}
\DoxyCodeLine{\ \ \ \ \{\ \textcolor{keyword}{operator}\ \textcolor{keyword}{co\_await}(t)\ \};}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{concept\ }has\_awaitable\_elements\ =\ \textcolor{keyword}{requires}(T\ \&\&a,\ std::coroutine\_handle<>\ h)\ \{}
\DoxyCodeLine{\ \ \ \ \{\ a.await\_ready()\ \}\ -\/>\ std::convertible\_to<bool>;}
\DoxyCodeLine{\ \ \ \ \{\ a.await\_suspend(h)\ \}\ -\/>\ is\_awaitable\_suspend\_type;}
\DoxyCodeLine{\ \ \ \ \{\ a.await\_resume()\ \};}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{concept\ }awaitable\_t\ =\ has\_member\_operator\_co\_await\_v<T>\ ||\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ has\_awaitable\_elements<T>\ ||\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ has\_non\_member\_operator\_co\_await\_v<T>;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template}\ <awaitable\_t\ T>}
\DoxyCodeLine{\textcolor{keyword}{using\ }\mbox{\hyperlink{namespacewebcraft_1_1async_a756c2303d30320ba433f8aa21010bd01}{awaitable\_resume\_t}}\ =\ \textcolor{keyword}{decltype}(detail::get\_awaiter(std::declval<T>()).await\_resume());}

\end{DoxyCode}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md43}{}\doxysection{\texorpdfstring{Task$<$\+T$>$}{Task<T>}}\label{md_include_2webcraft_2async_2README_autotoc_md43}
The fundamental coroutine type in {\ttfamily \doxylink{namespacewebcraft_1_1async}{webcraft\+::async}}. A {\ttfamily task\texorpdfstring{$<$}{<}T\texorpdfstring{$>$}{>}} represents an asynchronous operation that produces a result of type {\ttfamily T}. Implementation inspired by \href{https://github.com/microsoft/cpp-async}{\texttt{ microsoft/cpp-\/async}} and \href{https://github.com/lewissbaker/cppcoro/}{\texttt{ lewissbaker/cppcoro}}. The task type implementation is an eager task (it starts as soon as its constructed, similar to JS Promises)\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T\ =\ \textcolor{keywordtype}{void}>}
\DoxyCodeLine{\textcolor{keyword}{class\ }task}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{using\ }promise\_type\ =\ task\_promise<T>;}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{using\ }handle\_type\ =\ std::coroutine\_handle<promise\_type>;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Move-\/only\ type}}
\DoxyCodeLine{\ \ \ \ task(task\ \&\&other)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{\ \ \ \ task\ \&operator=(task\ \&\&other)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{\ \ \ \ \string~task();}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ task(\textcolor{keyword}{const}\ task\ \&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{\ \ \ \ task\ \&operator=(\textcolor{keyword}{const}\ task\ \&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Awaitable\ interface}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{bool}\ await\_ready()\ const\ noexcept;}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ await\_suspend(std::coroutine\_handle<>\ h)\ noexcept;}
\DoxyCodeLine{\ \ \ \ T\ await\_resume();\ \textcolor{comment}{//\ Returns\ void\ for\ task<void>}}
\DoxyCodeLine{\};}

\end{DoxyCode}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md44}{}\doxysubsection{\texorpdfstring{Promise Type Specification}{Promise Type Specification}}\label{md_include_2webcraft_2async_2README_autotoc_md44}
The {\ttfamily task\+\_\+promise\texorpdfstring{$<$}{<}T\texorpdfstring{$>$}{>}} type defines the coroutine promise interface that controls the behavior of task coroutines\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{class\ }task\_promise}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{\ \ \ \ std::optional<T>\ value;}
\DoxyCodeLine{\ \ \ \ std::exception\_ptr\ exception;}
\DoxyCodeLine{\ \ \ \ std::coroutine\_handle<>\ continuation;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Required\ promise\ interface}}
\DoxyCodeLine{\ \ \ \ task<T>\ get\_return\_object();}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Eager\ execution:\ returns\ suspend\_never\ to\ start\ immediately}}
\DoxyCodeLine{\ \ \ \ std::suspend\_never\ initial\_suspend()\ noexcept;}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Custom\ final\ awaiter\ for\ continuation\ chaining}}
\DoxyCodeLine{\ \ \ \ struct\ final\_awaiter}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ await\_ready()\ noexcept;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ await\_suspend(std::coroutine\_handle<task\_promise>\ h)\ noexcept;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ await\_resume()\ noexcept;}
\DoxyCodeLine{\ \ \ \ \};}
\DoxyCodeLine{\ \ \ \ final\_awaiter\ final\_suspend()\ noexcept;}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Store\ the\ result\ value}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ return\_value(T\ v)\ noexcept;}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Handle\ exceptions}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ unhandled\_exception()\ noexcept;}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Specialization\ for\ void\ return\ type}}
\DoxyCodeLine{template\ <>}
\DoxyCodeLine{class\ task\_promise<\textcolor{keywordtype}{void}>}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{\ \ \ \ std::exception\_ptr\ exception;}
\DoxyCodeLine{\ \ \ \ std::coroutine\_handle<>\ continuation;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ task<void>\ get\_return\_object();}
\DoxyCodeLine{\ \ \ \ std::suspend\_never\ initial\_suspend()\ noexcept;}
\DoxyCodeLine{\ \ \ \ final\_awaiter\ final\_suspend()\ noexcept;}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ return\_void()\ noexcept;\ \ \textcolor{comment}{//\ void\ tasks\ use\ return\_void()}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ unhandled\_exception()\ noexcept;}
\DoxyCodeLine{\};}

\end{DoxyCode}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md45}{}\doxysection{\texorpdfstring{Synchronization Primitives}{Synchronization Primitives}}\label{md_include_2webcraft_2async_2README_autotoc_md45}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md46}{}\doxysubsection{\texorpdfstring{event\+\_\+signal}{event\_signal}}\label{md_include_2webcraft_2async_2README_autotoc_md46}
A blocking synchronization primitive that can be set and waited upon. You can have multiple waiters waiting on this event to resume execution\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{class\ }event\_signal}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{\ \ \ \ event\_signal();}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ set()\ noexcept;}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ reset()\ noexcept;}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{bool}\ is\_set()\ const\ noexcept;}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{bool}\ wait()\ const;}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{bool}\ wait\_for(std::chrono::milliseconds\ timeout)\ const;}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{bool}\ operator()()\ const;}
\DoxyCodeLine{\ \ \ \ explicit\ operator\ \textcolor{keywordtype}{bool}()\ const;}
\DoxyCodeLine{\};}

\end{DoxyCode}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md47}{}\doxysubsection{\texorpdfstring{async\+\_\+event}{async\_event}}\label{md_include_2webcraft_2async_2README_autotoc_md47}
An asynchronous event that can be awaited in coroutines. You can have multiple awaiters waiting on this event to resume execution asynchronously\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct\ }async\_event}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{bool}\ await\_ready();}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ await\_suspend(std::coroutine\_handle<>\ h);}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ await\_resume();}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ set();}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{bool}\ is\_set()\ \textcolor{keyword}{const};}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ reset();}
\DoxyCodeLine{\};}

\end{DoxyCode}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md48}{}\doxysection{\texorpdfstring{Task Completion and Control}{Task Completion and Control}}\label{md_include_2webcraft_2async_2README_autotoc_md48}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md49}{}\doxysubsection{\texorpdfstring{task\+\_\+completion\+\_\+source$<$\+T$>$}{task\_completion\_source<T>}}\label{md_include_2webcraft_2async_2README_autotoc_md49}
Allows manual completion of a task from external code (e.\+g thread pool work, callback, etc). Implementation inspired by \href{https://github.com/microsoft/cpp-async}{\texttt{ microsoft/cpp-\/async}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{class\ }task\_completion\_source}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{using\ }value\_type\ =\ T;}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ task\_completion\_source()\ noexcept;}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ set\_value(T\ value);\ \ \textcolor{comment}{//\ void\ set\_value()\ for\ T=void}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{void}\ set\_exception(std::exception\_ptr\ exception);}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{namespacewebcraft}{webcraft}}::async::task<T>\ task();}
\DoxyCodeLine{\};}

\end{DoxyCode}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md50}{}\doxysubsection{\texorpdfstring{fire\+\_\+and\+\_\+forget\+\_\+task}{fire\_and\_forget\_task}}\label{md_include_2webcraft_2async_2README_autotoc_md50}
A task type that runs without needing to be awaited. It will destroy itself once the coroutine has finished (reached final suspend or coroutine frame is destroyed via {\ttfamily h.\+destroy()})\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{class\ }fire\_and\_forget\_task}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{class\ }promise\_type}
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{\ \ \ \ \ \ \ \ fire\_and\_forget\_task\ get\_return\_object();}
\DoxyCodeLine{\ \ \ \ \ \ \ \ std::suspend\_never\ initial\_suspend()\ noexcept;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ std::suspend\_never\ final\_suspend()\ noexcept;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ return\_void()\ noexcept;}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ unhandled\_exception()\ noexcept;}
\DoxyCodeLine{\ \ \ \ \};}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{fire\_and\_forget\_task\ fire\_and\_forget(task<\textcolor{keywordtype}{void}>\ t);}

\end{DoxyCode}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md51}{}\doxysection{\texorpdfstring{Combinators and Utilities}{Combinators and Utilities}}\label{md_include_2webcraft_2async_2README_autotoc_md51}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md52}{}\doxysubsection{\texorpdfstring{when\+\_\+all}{when\_all}}\label{md_include_2webcraft_2async_2README_autotoc_md52}
Execute multiple tasks concurrently and wait for all to complete asynchronously\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ For\ tasks\ that\ return\ values}}
\DoxyCodeLine{\textcolor{keyword}{template}\ <std::ranges::input\_range\ Range>}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{requires}\ awaitable\_t<std::ranges::range\_value\_t<Range>>}
\DoxyCodeLine{task<std::vector<Result>>\ \mbox{\hyperlink{namespacewebcraft_1_1async_adefc58a669759c7bf7067728c34cfbf5}{when\_all}}(Range\ \&\&tasks);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ For\ void-\/returning\ tasks}}
\DoxyCodeLine{\textcolor{keyword}{template}\ <std::ranges::input\_range\ Range>}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{requires}\ awaitable\_t<std::ranges::range\_value\_t<Range>>\ \&\&\ std::is\_void\_v<Result>}
\DoxyCodeLine{task<void>\ \mbox{\hyperlink{namespacewebcraft_1_1async_adefc58a669759c7bf7067728c34cfbf5}{when\_all}}(Range\ \&\&tasks);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ For\ tuples\ of\ different\ task\ types}}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}...\ Tasks>}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{requires}(awaitable\_t<Tasks>\ \&\&\ ...)}
\DoxyCodeLine{task<std::tuple<normalized\_result\_t<Tasks>...>>\ when\_all(Tasks\ \&\&...tasks);}

\end{DoxyCode}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md53}{}\doxysubsection{\texorpdfstring{when\+\_\+any}{when\_any}}\label{md_include_2webcraft_2async_2README_autotoc_md53}
Execute multiple tasks concurrently and return the first one to complete asynchronously\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ Type\ alias\ for\ normalized\ results\ (void\ becomes\ std::monostate)}}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{using\ }\mbox{\hyperlink{namespacewebcraft_1_1async_a8174852e651e90c6f296a823928af715}{normalized\_result\_t}}\ =\ std::conditional\_t<}
\DoxyCodeLine{\ \ \ \ std::is\_void\_v<awaitable\_resume\_t<T>>,}
\DoxyCodeLine{\ \ \ \ std::monostate,}
\DoxyCodeLine{\ \ \ \ awaitable\_resume\_t<T>>;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ For\ range\ of\ tasks}}
\DoxyCodeLine{\textcolor{keyword}{template}\ <std::ranges::input\_range\ Range>}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{requires}\ awaitable\_t<std::ranges::range\_value\_t<Range>>}
\DoxyCodeLine{task<Result>\ \mbox{\hyperlink{namespacewebcraft_1_1async_a2c5d38e8801b57b1ab7200366a8e22dc}{when\_any}}(Range\ \&\&tasks);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ For\ tuple\ of\ different\ task\ types}}
\DoxyCodeLine{\textcolor{keyword}{template}\ <awaitable\_t...\ Tasks>}
\DoxyCodeLine{task<std::variant<normalized\_result\_t<Tasks>...>>\ \mbox{\hyperlink{namespacewebcraft_1_1async_a2c5d38e8801b57b1ab7200366a8e22dc}{when\_any}}(Tasks\ \&\&...tasks);}

\end{DoxyCode}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md54}{}\doxysubsection{\texorpdfstring{sync\+\_\+wait}{sync\_wait}}\label{md_include_2webcraft_2async_2README_autotoc_md54}
Block the current thread and wait for an awaitable to complete. Implementation inspired by C++ 26 {\ttfamily sync\+\_\+wait} feature\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{template}\ <awaitable\_t\ T>}
\DoxyCodeLine{awaitable\_resume\_t<T>\ \mbox{\hyperlink{namespacewebcraft_1_1async_a367712ca561ac34d7d28f495a6462c09}{sync\_wait}}(T\ \&\&awaitable);}

\end{DoxyCode}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md55}{}\doxysection{\texorpdfstring{Generators}{Generators}}\label{md_include_2webcraft_2async_2README_autotoc_md55}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md56}{}\doxysubsection{\texorpdfstring{generator$<$\+T$>$}{generator<T>}}\label{md_include_2webcraft_2async_2README_autotoc_md56}
A synchronous generator for producing sequences of values. Implementation borrowed from \href{https://github.com/lewissbaker/cppcoro/}{\texttt{ lewissbaker/cppcoro}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{class\ }generator}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{class\ }iterator;}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ iterator\ begin();}
\DoxyCodeLine{\ \ \ \ iterator\ end();}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Range\ interface}}
\DoxyCodeLine{\};}

\end{DoxyCode}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md57}{}\doxysubsection{\texorpdfstring{async\+\_\+generator$<$\+T$>$}{async\_generator<T>}}\label{md_include_2webcraft_2async_2README_autotoc_md57}
An asynchronous generator for producing sequences of values with async operations. Implementation borrowed from \href{https://github.com/lewissbaker/cppcoro/}{\texttt{ lewissbaker/cppcoro}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{\textcolor{keyword}{class\ }async\_generator}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{class\ }iterator;}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ task<iterator>\ begin();}
\DoxyCodeLine{\ \ \ \ iterator\ end();}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Async\ range\ interface}}
\DoxyCodeLine{\};}

\end{DoxyCode}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md58}{}\doxysection{\texorpdfstring{Thread Pool}{Thread Pool}}\label{md_include_2webcraft_2async_2README_autotoc_md58}
A cached thread pool implementation for CPU-\/bound tasks\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{class\ }thread\_pool}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{\ \ \ \ thread\_pool(\textcolor{keywordtype}{size\_t}\ min\_threads\ =\ 0,\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ max\_threads\ =\ std::thread::hardware\_concurrency(),\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::chrono::milliseconds\ idle\_timeout\ =\ 10'000ms);}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \string~thread\_pool();}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Submit\ a\ callable\ to\ be\ executed\ on\ the\ thread\ pool}}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{auto}\ submit(F\ \&\&f,\ Args\ \&\&...args)\ -\/>\ std::future<std::invoke\_result\_t<F,\ Args...>>;}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ Getters}}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{size\_t}\ get\_min\_threads()\ \textcolor{keyword}{const};}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{size\_t}\ get\_max\_threads()\ \textcolor{keyword}{const};}
\DoxyCodeLine{\ \ \ \ std::chrono::milliseconds\ get\_idle\_timeout()\ \textcolor{keyword}{const};}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{size\_t}\ get\_workers\_size()\ \textcolor{keyword}{const};}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordtype}{size\_t}\ get\_available\_workers()\ \textcolor{keyword}{const};}
\DoxyCodeLine{\};}

\end{DoxyCode}
\hypertarget{md_include_2webcraft_2async_2README_autotoc_md59}{}\doxysection{\texorpdfstring{Macros and Type Aliases}{Macros and Type Aliases}}\label{md_include_2webcraft_2async_2README_autotoc_md59}
The namespace also provides convenient macros and type aliases\+:

\`{}\`{}\`{}cpp // Macro for creating async lambdas \#define co\+\_\+async \mbox{[}\&\mbox{]}() -\/\texorpdfstring{$>$}{>} \doxylink{classwebcraft_1_1async_1_1task_3_01void_01_4}{webcraft\+::async\+::task$<$void$>$}

// Type alias for tasks \#define \doxylink{async_8hpp_a90487a295616cb8cb36ce0c38e0b7417}{async\+\_\+t(\+T)} \+::webcraft\+::async\+::task$<$\+T$>$ 